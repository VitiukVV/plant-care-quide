import{r as B,i as R,j as e,a as o,P as u,b as h,c as l,h as m,k as A,F as k,I as w,S as C,M as S,l as T,A as G,T as p,m as U,n as W,C as F}from"./index-CJzAJxsW.js";import{a as H,b as O}from"./serviceAPI-tyEsb3sX.js";var g={},Y=R;Object.defineProperty(g,"__esModule",{value:!0});var I=g.default=void 0,K=Y(B()),V=e;I=g.default=(0,K.default)((0,V.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add");var b={},X=R;Object.defineProperty(b,"__esModule",{value:!0});var _=b.default=void 0,J=X(B()),Q=e;_=b.default=(0,J.default)((0,Q.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");const N=["Kitchen","Living Room","Hallway","Office","Balcony","Bedroom"],Z=({onClose:a})=>{const r=o.useContext(u),s=h(),[t,c]=o.useState(""),[P,L]=o.useState([]),[x,E]=o.useState(""),[f,M]=o.useState(N[0]),[q,j]=o.useState(0),[D,v]=o.useState("");o.useEffect(()=>{(async()=>{const i=await H();L(i[0].plantBotanicNames)})()},[]),o.useEffect(()=>{(async i=>{try{const d=await O(i);d.data.default_image&&d.data.default_image.thumbnail?(j(d.id),v(d.data.default_image.thumbnail)):(j(d.id),v("https://perenual.com/storage/image/missing_image.jpg"))}catch(d){console.error("Error fetching data:",d)}})(x)},[x]);const $=n=>{c(n.target.value)},y=n=>{const{name:i}=n.target;switch(i){case"botanicName":E(n.target.value);break;case"room":M(n.target.value);break;default:console.error(`Unhandled input name: ${i}`);break}},z=n=>{n.preventDefault(),r.addPlant([{commonName:t,botanicName:x,room:f,plantID:q,plantImgUrl:D}]),a()};return e.jsxs(l,{sx:{position:"relative",padding:"40px",background:"#fff",borderRadius:"24px",[s.breakpoints.between("md","lg")]:{width:"540px"},[s.breakpoints.up("lg")]:{width:"600px"}},children:[e.jsx(m,{sx:{minWidth:"unset",width:"24px",height:"24px",position:"absolute",right:"16px",top:"16px",backgroundColor:"transparent"},type:"button",onClick:a,children:e.jsx(_,{})}),e.jsx("form",{autoComplete:"off",onSubmit:z,children:e.jsxs(l,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e.jsx(A,{label:"Whats the name of your plant?",name:"commonName",onChange:$,type:"text",required:!0}),e.jsxs(k,{children:[e.jsx(w,{children:"Botanical Name"}),e.jsx(C,{name:"botanicName",label:"Botanical Name",value:x,onChange:y,required:!0,children:P.map((n,i)=>e.jsx(S,{value:n,children:n},i))})]}),e.jsxs(k,{children:[e.jsx(w,{children:"Room"}),e.jsx(C,{name:"room",label:"room",value:f,onChange:y,required:!0,children:N.map((n,i)=>e.jsx(S,{value:n,children:n},i))})]}),e.jsx(m,{variant:"contained",sx:{backgroundColor:s.palette.primary.main,color:"white"},type:"submit",children:"Add to my Garden"})]})})]})},ee=document.querySelector("#modal-root"),te=({onClose:a,children:r})=>{const s=o.useCallback(t=>{("code"in t&&t.code==="Escape"||"currentTarget"in t&&t.currentTarget===t.target)&&a()},[a]);return o.useEffect(()=>(document.addEventListener("keydown",s),()=>{document.removeEventListener("keydown",s)}),[s]),T.createPortal(e.jsx(l,{sx:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:" rgba(0, 0, 0, 0.8)",zIndex:1200},onClick:s,children:e.jsx(l,{sx:{overflowX:"auto",maxWidth:"calc(100vw - 48px)",maxHeight:"calc(100vh - 24px)"},children:r})}),ee)},ae=({plantData:a,index:r})=>{const s=o.useContext(u),t=h();return e.jsxs(l,{component:"li",sx:{width:"258px",borderRadius:"32px",padding:"16px",background:`linear-gradient(180deg, ${t.palette.primary.main} , ${t.palette.primary.light})`,[t.breakpoints.down("sm")]:{height:"350px"},[t.breakpoints.between("sm","md")]:{height:"400px"},[t.breakpoints.up("md")]:{width:"295px",height:"500px"}},children:[e.jsx(G,{variant:"square",src:a.plantImgUrl,alt:a.botanicName,sx:{borderRadius:"24px",loading:"lazy",width:"226px",[t.breakpoints.down("sm")]:{height:"170px"},[t.breakpoints.between("sm","md")]:{height:"220px"},[t.breakpoints.up("md")]:{width:"263px",height:"300px"}}}),e.jsxs(l,{sx:{display:"flex",flexDirection:"column",gap:"8px",mt:1},children:[e.jsx(p,{variant:"h4",children:a.commonName}),e.jsxs(p,{sx:{height:"48px"},children:[a.botanicName," ",e.jsxs(p,{component:"span",children:["in ",a.room]})]}),e.jsxs(l,{sx:{display:"flex",gap:"18px"},children:[e.jsx(m,{sx:{color:"Black",borderRadius:"24px",padding:"4px 28px"},variant:"outlined",type:"button",onClick:()=>s.removePlant(r),children:"Delete"}),e.jsx(m,{variant:"contained",type:"button",sx:{backgroundColor:t.palette.primary.main,borderRadius:"24px",padding:"4px 28px"},children:e.jsx(U,{style:{color:"white"},to:`/garden/details/${a.plantID}`,children:"Details"})})]})]})]})},ne=()=>{const a=o.useContext(u),r=h();return e.jsx(W,{sx:{display:"flex",flexWrap:"wrap",justifyContent:"center",[r.breakpoints.down("sm")]:{gap:"20px"},[r.breakpoints.between("sm","md")]:{fontSize:"2.75rem",gap:"30px"},[r.breakpoints.up("md")]:{gap:"40px"}},children:a.data.map((s,t)=>e.jsx(ae,{index:t,plantData:s},t))})},re=()=>{const[a,r]=o.useState(!1),s=o.useContext(u),t=h(),c=()=>{r(!a),a===!1&&(document.body.style.overflow="hidden"),a===!0&&(document.body.style.overflow="visible")};return e.jsx(l,{component:"section",children:e.jsxs(F,{sx:{[t.breakpoints.down("sm")]:{p:"0 20px"},[t.breakpoints.between("sm","md")]:{p:"0 40px"},[t.breakpoints.up("md")]:{p:"0 60px"}},children:[e.jsx(p,{component:"h1",variant:"h2",align:"center",sx:{[t.breakpoints.down("sm")]:{fontSize:"1.75rem",mb:"20px"},[t.breakpoints.between("sm","md")]:{fontSize:"2.75rem",mb:"30px"},[t.breakpoints.up("md")]:{mb:"40px"}},children:"Your Garden"}),e.jsx(l,{sx:{display:"flex",margin:"0 0 32px auto",justifyContent:"center",[t.breakpoints.up("sm")]:{justifyContent:"flex-end"}},children:e.jsxs(m,{variant:"contained",type:"button",onClick:c,sx:{display:"flex",gap:1,borderRadius:3,padding:"8px 40px 8px 32px",backgroundColor:t.palette.primary.main,color:t.palette.primary.light},children:[e.jsx(I,{}),"Add new"]})}),s.data.length>0?e.jsx(ne,{}):e.jsx(p,{component:"h2",variant:"h3",align:"center",children:"Your plant list is empty"}),a&&e.jsx(te,{onClose:c,children:e.jsx(Z,{onClose:c})})]})})};export{re as default};
